/* Common Ground - Music Visualization Styles */

* { box-sizing: border-box; margin: 0; padding: 0; }

body { 
  font-family: 'Inter', -apple-system, sans-serif;
  background: linear-gradient(145deg, #0d0d12 0%, #1a1a2e 40%, #16213e 100%);
  min-height: 100vh;
  overflow: hidden;
  color: #fff;
}

/* ==================== LOGIN SCREEN ==================== */
#login-screen {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: linear-gradient(145deg, #0d0d12 0%, #1a1a2e 40%, #16213e 100%);
  z-index: 10000;
}

#login-screen.hidden { display: none; }

.login-container {
  text-align: center;
  max-width: 400px;
  padding: 40px;
}

.login-container h1 {
  font-size: 42px;
  font-weight: 700;
  margin-bottom: 8px;
  letter-spacing: -1px;
}

.login-container .tagline {
  color: rgba(255,255,255,0.5);
  font-size: 16px;
  margin-bottom: 40px;
}

.spotify-btn {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  background: #1DB954;
  color: #fff;
  border: none;
  padding: 16px 32px;
  border-radius: 50px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  font-family: inherit;
}

.spotify-btn:hover { background: #1ed760; transform: scale(1.03); }
.spotify-btn:active { transform: scale(0.98); }
.spotify-btn svg { width: 24px; height: 24px; }

.login-footer {
  margin-top: 30px;
  font-size: 12px;
  color: rgba(255,255,255,0.3);
}

/* ==================== LOADING SCREEN ==================== */
#loading {
  position: fixed;
  inset: 0;
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: linear-gradient(145deg, #0d0d12 0%, #1a1a2e 40%, #16213e 100%);
  z-index: 9999;
}

#loading.visible { display: flex; }

.loader {
  width: 50px;
  height: 50px;
  border: 3px solid rgba(255,255,255,0.1);
  border-top-color: #1DB954;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 16px;
}

@keyframes spin { to { transform: rotate(360deg); } }

#loading p { color: rgba(255,255,255,0.6); font-size: 15px; }
#loading .progress { color: rgba(255,255,255,0.35); font-size: 12px; margin-top: 8px; }

/* ==================== MAIN APP ==================== */
#app {
  width: 100vw;
  height: 100vh;
  position: relative;
  cursor: grab;
  display: none;
}

#app.ready { display: block; }
#app.panning { cursor: grabbing; }

/* ==================== CONTROL PANEL ==================== */
.control-panel {
  position: fixed;
  top: 16px;
  left: 16px;
  background: rgba(12,12,20,0.92);
  backdrop-filter: blur(20px);
  border-radius: 16px;
  padding: 18px;
  z-index: 1000;
  border: 1px solid rgba(255,255,255,0.08);
  min-width: 260px;
  max-width: 280px;
  max-height: calc(100vh - 32px);
  overflow-y: auto;
  box-shadow: 0 8px 32px rgba(0,0,0,0.4);
  cursor: default;
}

.control-panel h1 { font-size: 20px; font-weight: 700; margin-bottom: 2px; letter-spacing: -0.3px; }
.control-panel .subtitle { color: rgba(255,255,255,0.45); font-size: 12px; margin-bottom: 14px; }

/* User Info */
.user-info {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;
  background: rgba(255,255,255,0.04);
  border-radius: 10px;
  margin-bottom: 14px;
}

.user-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #1DB954;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 14px;
}

.user-avatar img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }

.user-details { flex: 1; min-width: 0; }
.user-name { font-size: 13px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.user-logout { font-size: 10px; color: rgba(255,255,255,0.4); cursor: pointer; }
.user-logout:hover { color: #ff6b6b; }

/* Search */
.search-input {
  width: 100%;
  padding: 9px 12px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.1);
  background: rgba(255,255,255,0.04);
  color: #fff;
  font-size: 13px;
  margin-bottom: 10px;
  outline: none;
  font-family: inherit;
}

.search-input:focus { border-color: rgba(255,255,255,0.2); background: rgba(255,255,255,0.06); }
.search-results { max-height: 120px; overflow-y: auto; margin-bottom: 14px; }

.search-result {
  padding: 5px 8px;
  font-size: 12px;
  color: rgba(255,255,255,0.8);
  border-radius: 6px;
  background: rgba(255,255,255,0.04);
  margin-bottom: 3px;
  cursor: pointer;
  transition: background 0.15s;
}

.search-result:hover { background: rgba(255,255,255,0.08); }
.search-result .artist { color: rgba(255,255,255,0.4); font-size: 11px; }

/* Section Titles */
.section-title { 
  font-size: 11px; 
  color: rgba(255,255,255,0.35); 
  margin-bottom: 6px; 
  text-transform: uppercase; 
  letter-spacing: 1px; 
  font-weight: 600; 
}

/* Zoom Controls */
.zoom-controls { display: flex; gap: 6px; margin-bottom: 5px; }

.zoom-btn {
  flex: 1; 
  padding: 7px; 
  border-radius: 6px; 
  border: none;
  background: rgba(255,255,255,0.08); 
  color: #fff; 
  cursor: pointer;
  font-size: 13px; 
  font-weight: 500; 
  font-family: inherit; 
  transition: background 0.15s;
}

.zoom-btn:hover { background: rgba(255,255,255,0.12); }
.zoom-hint { font-size: 10px; color: rgba(255,255,255,0.25); text-align: center; margin-bottom: 14px; }

/* Genres */
.genres-grid { display: flex; flex-wrap: wrap; gap: 3px; margin-bottom: 14px; }

.genre-item {
  display: flex; 
  align-items: center; 
  gap: 5px; 
  padding: 4px 7px;
  border-radius: 8px; 
  cursor: pointer; 
  transition: all 0.15s; 
  border: 1px solid transparent;
}

.genre-item:hover { background: rgba(255,255,255,0.08); }
.genre-dot { width: 8px; height: 8px; border-radius: 2px; }
.genre-name { font-size: 11px; text-transform: capitalize; }
.genre-count { font-size: 10px; color: rgba(255,255,255,0.35); }

/* Playlists */
.playlists-list { max-height: 220px; overflow-y: auto; }

.playlist-item {
  display: flex; 
  align-items: center; 
  gap: 8px; 
  padding: 6px 8px;
  border-radius: 8px; 
  cursor: pointer; 
  transition: all 0.15s;
}

.playlist-item:hover { background: rgba(255,255,255,0.08); }
.playlist-dot { width: 8px; height: 8px; border-radius: 2px; flex-shrink: 0; }
.playlist-info { flex: 1; min-width: 0; }
.playlist-name { font-size: 12px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.playlist-count { font-size: 10px; color: rgba(255,255,255,0.35); }

/* ==================== GRID ==================== */
#grid-container { 
  position: absolute; 
  left: 50%; 
  top: 50%; 
  transform-origin: center center; 
  will-change: transform; 
}

#grid { display: grid; gap: 5px; contain: layout style; }

/* ==================== SONG TILES ==================== */
.song-tile {
  width: 52px; 
  height: 52px; 
  border-radius: 6px; 
  position: relative; 
  overflow: hidden;
  cursor: pointer; 
  transition: transform 0.15s ease, box-shadow 0.15s ease; 
  border: 2px solid transparent;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3); 
  contain: layout style paint;
}

.song-tile:hover { transform: scale(1.3); z-index: 100; box-shadow: 0 8px 32px rgba(0,0,0,0.5); }
.song-tile.dimmed { opacity: 0.1; }
.song-tile.highlighted { box-shadow: 0 0 16px var(--highlight-color); border-color: var(--highlight-color); }

/* Pre-defined highlight colors for playlists */
.song-tile.hl-0 { --highlight-color: #ff6b6b; }
.song-tile.hl-1 { --highlight-color: #4ecdc4; }
.song-tile.hl-2 { --highlight-color: #ffe66d; }
.song-tile.hl-3 { --highlight-color: #95e1d3; }
.song-tile.hl-4 { --highlight-color: #dda0dd; }
.song-tile.hl-5 { --highlight-color: #f7dc6f; }
.song-tile.hl-6 { --highlight-color: #87ceeb; }
.song-tile.hl-7 { --highlight-color: #ff9f43; }
.song-tile.hl-8 { --highlight-color: #a29bfe; }
.song-tile.hl-9 { --highlight-color: #fd79a8; }
.song-tile.hl-10 { --highlight-color: #00cec9; }
.song-tile.hl-11 { --highlight-color: #e17055; }
.song-tile.hl-12 { --highlight-color: #74b9ff; }
.song-tile.hl-13 { --highlight-color: #55efc4; }
.song-tile.hl-14 { --highlight-color: #ffeaa7; }
.song-tile.hl-15 { --highlight-color: #fab1a0; }
.song-tile.hl-16 { --highlight-color: #81ecec; }
.song-tile.hl-17 { --highlight-color: #dfe6e9; }

/* Category highlight colors */
.song-tile.hl-cat-rb { --highlight-color: #f39c12; }
.song-tile.hl-cat-hiphop { --highlight-color: #1abc9c; }
.song-tile.hl-cat-pop { --highlight-color: #ff6b81; }
.song-tile.hl-cat-rock { --highlight-color: #e74c3c; }
.song-tile.hl-cat-electronic { --highlight-color: #00d2d3; }
.song-tile.hl-cat-soul { --highlight-color: #9b59b6; }
.song-tile.hl-cat-latin { --highlight-color: #fd79a8; }
.song-tile.hl-cat-indie { --highlight-color: #a29bfe; }
.song-tile.hl-cat-jazz { --highlight-color: #fdcb6e; }
.song-tile.hl-cat-country { --highlight-color: #d35400; }
.song-tile.hl-cat-dancehall { --highlight-color: #00b894; }
.song-tile.hl-cat-other { --highlight-color: #636e72; }

.song-tile img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; }

.song-tile .fallback {
  display: flex; 
  align-items: center; 
  justify-content: center;
  width: 100%; 
  height: 100%; 
  font-size: 13px; 
  font-weight: 600; 
  color: rgba(255,255,255,0.85);
}

.song-tile .category-bar { position: absolute; bottom: 0; left: 0; right: 0; height: 3px; }

.song-tile .popularity-badge {
  position: absolute; 
  top: 2px; 
  right: 2px; 
  background: rgba(0,0,0,0.8);
  border-radius: 8px; 
  padding: 1px 4px; 
  font-size: 9px; 
  font-weight: 600;
}

/* ==================== TOOLTIP ==================== */
.tooltip {
  position: fixed; 
  background: rgba(8,8,16,0.97); 
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 12px; 
  padding: 12px 16px; 
  z-index: 2000; 
  min-width: 180px; 
  max-width: 260px;
  pointer-events: none; 
  box-shadow: 0 12px 40px rgba(0,0,0,0.5); 
  display: none;
}

.tooltip.visible { display: block; }
.tooltip .song-name { font-weight: 600; font-size: 14px; margin-bottom: 3px; }
.tooltip .artist-name { color: rgba(255,255,255,0.55); font-size: 12px; margin-bottom: 8px; }

.tooltip .category-badge {
  display: inline-block; 
  font-size: 10px; 
  padding: 3px 8px; 
  border-radius: 12px;
  font-weight: 600; 
  text-transform: uppercase; 
  letter-spacing: 0.5px; 
  margin-bottom: 8px;
}

.tooltip .playlist-tags { display: flex; gap: 4px; flex-wrap: wrap; }
.tooltip .playlist-tag { font-size: 10px; padding: 3px 7px; border-radius: 10px; font-weight: 500; }

/* ==================== INSTRUCTIONS ==================== */
.instructions {
  position: fixed; 
  bottom: 16px; 
  right: 16px; 
  background: rgba(12,12,20,0.85);
  backdrop-filter: blur(10px); 
  border-radius: 10px; 
  padding: 10px 14px;
  border: 1px solid rgba(255,255,255,0.08); 
  font-size: 11px; 
  color: rgba(255,255,255,0.5);
}

.instructions strong { color: rgba(255,255,255,0.7); }

/* ==================== TASTE PROFILE ==================== */
.taste-profile { margin-bottom: 16px; }
.taste-score-container { margin-bottom: 10px; }
.taste-label { font-size: 15px; font-weight: 600; margin-bottom: 6px; text-align: center; }
.taste-bar-bg { height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden; margin-bottom: 4px; }
.taste-bar { height: 100%; border-radius: 4px; transition: width 1s ease, background 1s ease; }
.taste-spectrum { display: flex; justify-content: space-between; font-size: 10px; color: rgba(255,255,255,0.4); }
.taste-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; margin-top: 10px; }
.taste-stat { background: rgba(255,255,255,0.04); border-radius: 8px; padding: 8px; text-align: center; }
.taste-stat-value { font-size: 18px; font-weight: 700; margin-bottom: 2px; }
.taste-stat-label { font-size: 10px; color: rgba(255,255,255,0.5); text-transform: uppercase; letter-spacing: 0.5px; }

/* ==================== SCROLLBAR ==================== */
::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: rgba(255,255,255,0.03); }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 3px; }
